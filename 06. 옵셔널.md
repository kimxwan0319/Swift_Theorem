# 옵셔널

**nil을 사용할 수 있는 타입**



## nil

**값이 없음**을 의미하는 특수한 값

정수형의 0 혹은 문자열의 ""   ❌

값을 처리하는 과정에 문제가 있을시 반환된다.

해당 값이 **옵셔널**타입일때만 반환될 수 있다.



## 옵셔널 타입 선언과 정의

**자료형 뒤에 '?'만 붙이면 된다.**

```swift
var optInt : Int? //옵셔널 Int 타입
var optStr : String? //옵셔널 String 타입
var optArr : [Int]? //옵셔널 Array타입
var optDic : [String:String] //옵셔널 Dictionary타입
```

<div style="text-align: right"> ( 위 같은 경우 뿐만 아닌 모든 자료형은 옵셔널 타입이 될 수 있다. )</div>

이렇게 선언만하고 초기화를 하지 않으면 일반 자료형일땐 아무것도 할당되지않지만 **옵셔널타입일땐 nil로 초기화 된다**.

```swift
var optInt: Int? = 123
print(optInt)

------result------
Optional(123)
```

값을 대입해보고 출력해보면 위 같이 Optional()안에 값이 들어간것을 보게될것이다.

이러한 것을 옵셔널로 감싸졌다고 하여 **옵셔널 래핑**이라고 표현한다.

옵셔널 래핑이 되어있는 값들은 **연산/대입이 불가능하다**.



## 옵셔널 값 처리

위에서 말한것처럼 옵셔널 래핑이 되어있는 값들은 연산/대입이 불가능하다.

그래서 이를 해제하고 싶다면 **옵셔널 언래핑**이라고도 불리는 **옵셔널 해제**를 통해 실제값을 추출할 수 있다.

옵셔널 해제 방법에는 **명시적 해제**와 **묵시적 해제**가 있다.

명시적 해제는 다시 **강제적인 해제**와 **비강제적인 해제**로 나눌 수 있고, 묵시적 해제는 **컴파일러에 의한 자동 해제**와 **연산자를 이용한 자동해제**로 나눌 수 있다.

* **옵셔널 강제 해제**

  옵셔널 타입의 값 뒤에 '**!**'기호만 붙여주면 된다.

  ```swift
  var optInt: Int? = 123
  
  print(optInt!)
  
  -----result------
  123
  ```

  이렇게 !를 붙여 강제 해제를 했을땐 값이 nil일때도 강제 해제가되어 오류가 발생한다.

  **절대 nil값이 들어가지 않을 것이라는 보장**이 있을때에만 하는것이 좋다.

  

* **옵셔널 바인딩** ( 비강제적인 해제 )

  강제 해제에서 nil을 해제했을때 나타나는 오류를 보완하기위한 비강제적인 해제 구문이다.

  **조건문 내에서 일반 상수에 옵셔널 값을 대입하는 방식**으로 이루어진다.

  ```swift
  var name = "김수완"
  
  if let intFromStr = Int(name) {
    print(intFromStr)
  }else{
    print("ERROR")
  }
  
  ------result------
  ERROR
  ```

  위의 결과는 String이 재대로 Int로 변환되지 못해 name의 값은 nil이 되었지만, 조건문에선 값의 할당이 실패하였기때문에 결과값이 false로 반환될 뿐이므로 else 블록이 실행될뿐 오류는 발생하지 않는다.

  

* **컴파일러에 의한 옵셔널 자동 해제**

  위 나열된 두 방법처럼 **명시적 해제**를 하지 않아도 옵셔널을 해제해주는 경우도 있다.

  ```swift
  let opt = Int("123")
  
  if(optInt == 123){
    print("SUCCESS")
  } else {
    print("ERROR")
  }
  
  ------result------
  SUCCESS
  ```

  위처럼 옵셔널 객체의 값을 비교 연산자를 사용하여 비교하는 경우엔 명시적으로 옵셔널 객체를 해제하지 않아도 한쪽이 옵셔널, 다른 한쪽이 일바타입이라면 자동으로 옵셔널을 해제하여 연산을 수행한다.

  

* **연산자를 이용한 자동해제**

  옵셔널을 선언할때 '?'대신 '**!**'만 붙여주면 된다.

  ```swift
  var str: String! = "Swift"
  
  ------result------
  Swift
  ```

  위처럼 !를 사용하여 자동 해제를 하면 옵셔널타입은 맞지만 옵셔널 객체가 해제되어 나온다.

  ```swift
  var value: Int! = 10
  print(value + 5)
  
  ------result-------
  15
  ```

  이렇게 일반 타입과 연산해도 문제가 되지 않는다.

  하지만, **변수의 값이 nil이 될 가능성이 있다면 연산자를 리용한 옵셔널 해제를 사용하지 않아야 한다**.